---
import BaseLayout from '../../layouts/BaseLayout.astro';
import CategoryPromptGenerator from '../../components/CategoryPromptGenerator.jsx';
import prompts from '../../data/categoryPrompts.json';

// Generate static paths for each unique category
export function getStaticPaths() {
  // Extract unique categories from the prompts
  const categories = [...new Set(prompts.map(prompt => prompt.category))];

  // Generate a path for each category
  return categories.map(category => {
    // Filter prompts for this specific category
    const categoryPrompts = prompts.filter(prompt => prompt.category === category);

    return {
      params: { category },
      props: {
        categoryPrompts,
        categoryName: category
      }
    };
  });
}

const { categoryPrompts, categoryName } = Astro.props;
const capitalizedCategory = categoryName.charAt(0).toUpperCase() + categoryName.slice(1);
const siteUrl = 'https://randomprompts.org';
const currentUrl = `${siteUrl}/prompts/${categoryName}`;

// SEO Metadata object for BaseLayout
const seo = {
  path: `prompts/${categoryName}`,
  title: `Random ${capitalizedCategory} Writing Prompts Generator | RandomPrompts.org`,
  description: `Generate over ${categoryPrompts.length} unique ${categoryName} story ideas and writing prompts. Perfect for writers, authors, and creative storytellers looking for ${categoryName} inspiration.`,
  keywords: `${categoryName} prompts, ${categoryName} writing prompts, ${categoryName} story ideas, creative writing, writing inspiration, ${categoryName} generator`
};

// JSON-LD Schema for SoftwareApplication
const schema = {
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": `${capitalizedCategory} Writing Prompts Generator`,
  "description": seo.description,
  "url": currentUrl,
  "applicationCategory": "EntertainmentApplication",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "operatingSystem": "Any",
  "browserRequirements": "Requires JavaScript",
  "creator": {
    "@type": "Organization",
    "name": "RandomPrompts.org"
  }
};
---

<BaseLayout seo={seo}>
  <!-- Additional SEO Meta Tags -->
  <Fragment slot="head">
    <script type="application/ld+json" set:html={JSON.stringify(schema)} />
  </Fragment>

  <!-- Hero Section -->
  <section class="py-12 px-4 bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-900 dark:to-gray-800">
    <div class="max-w-4xl mx-auto text-center">
      <h1 class="text-4xl md:text-5xl font-bold text-gray-900 dark:text-white mb-4">
        {capitalizedCategory} Writing Prompts Generator
      </h1>
      <p class="text-xl text-gray-600 dark:text-gray-300 mb-6">
        Generate unique {categoryName} story ideas and creative writing prompts instantly
      </p>
      <div class="flex flex-wrap justify-center gap-3 text-sm text-gray-600 dark:text-gray-400">
        <span class="px-4 py-2 bg-white dark:bg-gray-700 rounded-full shadow-sm">
          âœ¨ {categoryPrompts.length}+ Prompts
        </span>
        <span class="px-4 py-2 bg-white dark:bg-gray-700 rounded-full shadow-sm">
          ðŸŽ² Random Generation
        </span>
        <span class="px-4 py-2 bg-white dark:bg-gray-700 rounded-full shadow-sm">
          ðŸ“‹ Copy & Save
        </span>
      </div>
    </div>
  </section>

  <!-- Interactive Generator Component -->
  <section class="py-12 px-4">
    <div class="max-w-4xl mx-auto">
      <CategoryPromptGenerator
        initialPrompts={categoryPrompts}
        category={categoryName}
        client:load
      />
    </div>
  </section>

  <!-- SEO Content Section -->
  <article class="prose lg:prose-xl mx-auto mt-16 px-4 max-w-4xl">
    <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
      How to Use These {capitalizedCategory} Prompts
    </h2>

    <div class="text-gray-700 dark:text-gray-300 space-y-4 mb-12">
      <p>
        Overcoming writer's block in the {categoryName} genre can be challenging, but our {categoryName} writing
        prompts generator makes it effortless. Whether you're a seasoned author or just starting your creative
        writing journey, these carefully crafted prompts will spark your imagination and help you develop
        compelling {categoryName} stories.
      </p>

      <p>
        <strong>Getting Started:</strong> Simply click the "Generate New Prompt" button to receive a fresh
        {categoryName} writing idea. Found one you love? Use the lock button to save it while you explore
        other options, or click the copy button to add it to your writing notebook. Our generator features
        over {categoryPrompts.length} unique {categoryName} prompts, ensuring you'll always have fresh inspiration.
      </p>

      <p>
        <strong>Best Practices:</strong> Don't feel constrained by the promptâ€”use it as a starting point and
        let your creativity take over. Combine elements from multiple prompts, change character perspectives,
        or adapt the setting to match your unique vision. The goal is to break through creative barriers and
        get your words flowing.
      </p>
    </div>

    <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
      Why {capitalizedCategory} Writing Prompts Work
    </h2>

    <div class="text-gray-700 dark:text-gray-300 space-y-4 mb-12">
      <p>
        {capitalizedCategory} writing prompts are more than just random ideasâ€”they're carefully designed to
        engage specific elements that make {categoryName} stories compelling. Each prompt in our generator
        incorporates key ingredients that resonate with {categoryName} readers and provide clear narrative
        direction for writers.
      </p>

      <p>
        Research shows that writers who use prompts regularly develop stronger creative muscles and overcome
        writer's block more quickly. By removing the pressure of starting from a blank page, prompts allow
        you to focus on what matters most: crafting engaging {categoryName} narratives that captivate your
        audience.
      </p>
    </div>

    <h2 class="text-3xl font-bold text-gray-900 dark:text-white mb-6">
      Frequently Asked Questions About {capitalizedCategory} Writing
    </h2>

    <div class="space-y-8 mb-12">
      <div>
        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-3">
          What makes a good {categoryName} writing prompt?
        </h3>
        <p class="text-gray-700 dark:text-gray-300">
          A good {categoryName} prompt provides enough structure to guide your story while leaving room for
          creative interpretation. It should include compelling elements specific to the {categoryName} genreâ€”such
          as unique conflicts, interesting characters, or thought-provoking scenariosâ€”while avoiding overly
          prescriptive details that limit your creativity.
        </p>
      </div>

      <div>
        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-3">
          Can I use these prompts for published work?
        </h3>
        <p class="text-gray-700 dark:text-gray-300">
          Absolutely! All prompts generated by our tool are free to use for any purpose, including commercial
          publication. The prompts are designed as creative springboardsâ€”the unique story you create from them
          is entirely your own original work. We encourage writers to develop these {categoryName} ideas into
          full stories, novels, or any other creative projects.
        </p>
      </div>

      <div>
        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-3">
          How often should I use writing prompts?
        </h3>
        <p class="text-gray-700 dark:text-gray-300">
          Many successful {categoryName} writers incorporate prompts into their daily or weekly writing practice.
          Even if you're working on a long-term project, spending 15-30 minutes with a prompt can serve as an
          excellent warm-up exercise, help you explore new techniques, or provide a creative break when you're
          feeling stuck on your main work.
        </p>
      </div>

      <div>
        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-3">
          What if I don't like the generated prompt?
        </h3>
        <p class="text-gray-700 dark:text-gray-300">
          Simply click "Generate New Prompt" to receive another idea! Our {categoryName} prompt generator contains
          {categoryPrompts.length}+ unique combinations, so you can keep exploring until you find one that resonates
          with you. You can also use the history feature to revisit previously generated prompts if you change your
          mind.
        </p>
      </div>
    </div>

    <div class="bg-purple-50 dark:bg-gray-800 p-8 rounded-lg border-l-4 border-purple-500 mb-12">
      <h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">
        Ready to Start Writing?
      </h3>
      <p class="text-gray-700 dark:text-gray-300 mb-4">
        Don't let writer's block hold you back. Our {categoryName} writing prompts generator provides endless
        inspiration to fuel your creative writing journey. Generate your next great {categoryName} story idea now!
      </p>
      <a
        href="#top"
        class="inline-block px-6 py-3 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition-colors"
      >
        Generate More Prompts
      </a>
    </div>
  </article>
</BaseLayout>
