---
// Astro Header Component - Server-side rendered with client-side interactivity for mobile menu
import UserMenu from './UserMenu';
import AuthModal from './AuthModal';

// Get Supabase config with fallbacks
const SUPABASE_URL = import.meta.env.PUBLIC_SUPABASE_URL ||
                     import.meta.env.NEXT_PUBLIC_SUPABASE_URL ||
                     import.meta.env.SUPABASE_URL || '';

const SUPABASE_ANON_KEY = import.meta.env.PUBLIC_SUPABASE_ANON_KEY ||
                          import.meta.env.NEXT_PUBLIC_SUPABASE_ANON_KEY ||
                          import.meta.env.SUPABASE_ANON_KEY ||
                          import.meta.env.SUPABASE_PUBLISHABLE_KEY || '';
---

<!-- Make Supabase config available globally for client-side components -->
<script is:inline define:vars={{ SUPABASE_URL, SUPABASE_ANON_KEY }}>
  window.__SUPABASE_URL__ = SUPABASE_URL;
  window.__SUPABASE_ANON_KEY__ = SUPABASE_ANON_KEY;
</script>

<!-- Global Auth Modal -->
<AuthModal
  client:only="react"
  isOpen={false}
  supabaseUrl={SUPABASE_URL}
  supabaseAnonKey={SUPABASE_ANON_KEY}
/>

<header class="bg-white shadow-sm border-b border-gray-200">
  <div class="max-w-7xl mx-auto px-4 py-4">
    <div class="flex items-center">
      <!-- Logo -->
      <a href="/" class="flex items-center space-x-2 flex-shrink-0">
        <svg width="24" height="24" viewBox="0 -18 1060 1060" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g strokeWidth="0"></g>
          <g strokeLinecap="round" strokeLinejoin="round"></g>
          <g>
            <path
              d="M778.869382 900.026841l-78.925431 104.541579a51.232297 51.232297 0 0 1-69.232834 10.384926l-173.082085-132.234713a155.773876 155.773876 0 0 1-12.46191 20.077522 161.312503 161.312503 0 0 1-225.699038 28.385462 161.312503 161.312503 0 0 1-34.616417-225.006711 155.773876 155.773876 0 0 1 15.231223-18.000537L20.76985 553.862672a51.232297 51.232297 0 0 1-10.384925-69.232834l75.463789-103.849251a168.235786 168.235786 0 0 0 26.308477 24.231492 161.312503 161.312503 0 0 0 225.699039-28.385462 161.312503 161.312503 0 0 0-34.616417-225.006711 168.235786 168.235786 0 0 0-30.462447-18.000536L357.933751 20.76985a51.232297 51.232297 0 0 1 69.232834-10.384925L603.017984 138.465668a161.312503 161.312503 0 0 1 222.929725-24.231492 161.312503 161.312503 0 0 1 38.078059 220.85274L1038.492509 468.013957a51.232297 51.232297 0 0 1 10.384925 69.232834L969.259675 646.634669a168.928115 168.928115 0 0 0-20.76985-18.692865 158.54319 158.54319 0 1 0-191.082622 253.392172 168.928115 168.928115 0 0 0 21.462179 18.692865z"
              fill="#0b63d5"
            />
            <path
              d="M547.631716 249.238202a172.389757 167.543458 0 1 0 344.779514 0 172.389757 167.543458 0 1 0-344.779514 0Z"
              fill="#FFCE54"
            />
          </g>
        </svg>
        <span class="text-xl font-bold text-gray-900">Random Prompts</span>
      </a>

      <!-- Mobile menu toggle button -->
      <button
        id="mobile-menu-toggle"
        class="md:hidden ml-auto p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors"
        aria-label="Toggle menu"
      >
        <svg id="menu-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
        <svg id="close-icon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>

      <!-- Desktop Navigation - Centered -->
      <nav class="hidden md:flex items-center space-x-6 flex-1 justify-center">
        <a href="/" class="text-gray-600 hover:text-blue-600 transition-colors">Home</a>

        <!-- Product Megamenu with Tabs -->
        <div class="relative group">
          <button class="text-gray-600 hover:text-blue-600 transition-colors flex items-center gap-1">
            Product
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>

          <!-- Megamenu Dropdown -->
          <div id="product-megamenu" class="absolute top-full left-0 mt-2 w-[900px] bg-white rounded-lg shadow-xl border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <div class="flex w-[900px]">
              <!-- Left Column: Tabs/Categories -->
              <div class="w-48 flex-shrink-0 bg-gray-50 border-r border-gray-200 rounded-l-lg p-4">
                <button
                  class="product-tab active w-full text-left px-4 py-3 rounded-lg text-gray-700 hover:bg-white hover:text-blue-600 transition-colors font-medium mb-2 bg-white text-blue-600"
                  data-tab="free-tools"
                >
                  Free Tools
                </button>
                <button
                  class="product-tab w-full text-left px-4 py-3 rounded-lg text-gray-700 hover:bg-white hover:text-blue-600 transition-colors font-medium"
                  data-tab="features"
                >
                  Features
                </button>
              </div>

              <!-- Right Column: Tab Content -->
              <div class="flex-1 p-6">
                <!-- Free Tools Content -->
                <div class="product-tab-content" data-content="free-tools">
                  <!-- First Row: Writing Prompts, Generators, Art Prompts -->
                  <div class="grid grid-cols-3 gap-6 mb-6">
                    <!-- Writing Prompts Column -->
                    <div>
                      <a href="/writing-prompts-generator" class="font-bold text-gray-900 hover:text-blue-600 mb-3 block">Writing Prompts</a>
                      <div class="space-y-2">
                        <a href="/writing-prompts-generator/story-starters" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Story Starters</a>
                        <a href="/writing-prompts-generator/character" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Character Generator</a>
                        <a href="/writing-prompts-generator/conflict" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Conflict Generator</a>
                        <a href="/writing-prompts-generator/plot-twist" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Plot Twist Generator</a>
                        <a href="/writing-prompts-generator/villain" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Villain Generator</a>
                      </div>
                    </div>

                    <!-- Generators Column -->
                    <div>
                      <a href="/generators" class="font-bold text-gray-900 hover:text-blue-600 mb-3 block">Generators</a>
                      <div class="space-y-2">
                        <a href="/generators/paragraph" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Paragraph Generator</a>
                        <a href="/generators/sentence" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Sentence Generator</a>
                        <a href="/generators/fantasy-name" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Fantasy Name Generator</a>
                        <a href="/generators/superpower" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Superpower Generator</a>
                        <a href="/generators/idea" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Idea Generator</a>
                      </div>
                    </div>

                    <!-- Art Prompts Column -->
                    <div>
                      <a href="/art-prompts" class="font-bold text-gray-900 hover:text-blue-600 mb-3 block">Art Prompts</a>
                      <div class="space-y-2">
                        <a href="/art-prompts/aesthetic" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Aesthetic Generator</a>
                        <a href="/art-prompts/fantasy-art" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Fantasy Art Generator</a>
                        <a href="/art-prompts/anime" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Anime Generator</a>
                        <a href="/art-prompts/character-design" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Character Design Generator</a>
                        <a href="/art-prompts/portrait" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Portrait Generator</a>
                      </div>
                    </div>
                  </div>

                  <!-- Second Row: Other Prompts in 2 Columns -->
                  <div class="border-t border-gray-200 pt-4">
                    <h3 class="font-bold text-gray-900 mb-3">Other Prompts</h3>
                    <div class="grid grid-cols-2 gap-6">
                      <!-- Column 1 -->
                      <div class="space-y-2">
                        <a href="/ghostface-ai-trend-prompt-generator" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Ghostface AI Trend</a>
                        <a href="/gemini-ai-snow-prompt-tutorial" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Gemini AI Snow Tutorial</a>
                        <a href="/chatgpt-photo-editing-prompts" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">ChatGPT Photo Editing</a>
                        <a href="/gemini-photo-editing-prompts" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Gemini Photo Editing</a>
                        <a href="/october-writing-prompts" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">October Writing Prompts</a>
                      </div>
                      <!-- Column 2 -->
                      <div class="space-y-2">
                        <a href="/christmas-writing-prompts" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Christmas Writing Prompts</a>
                        <a href="/writing-prompts-for-students" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Writing Prompts for Students</a>
                        <a href="/persuasive-writing-topics" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Persuasive Writing</a>
                        <a href="/midjourney-ai-picture-generator" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Midjourney AI Prompts</a>
                        <a href="/nano-banana-prompts" class="block text-sm text-gray-700 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded">Nano Banana Prompts</a>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Features Content -->
                <div class="product-tab-content hidden" data-content="features">
                  <div class="grid grid-cols-2 gap-6">
                    <a href="/workflows/youtube-to-blog-and-linkedin" class="p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:shadow-md transition-all">
                      <h3 class="font-semibold text-gray-900 mb-2">YouTube to LinkedIn and Blog Post</h3>
                      <p class="text-sm text-gray-600">Transform any YouTube video into a content brief, blog post, and LinkedIn posts</p>
                    </a>
                    <a href="/tools/youtube-content-brief" class="p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:shadow-md transition-all">
                      <h3 class="font-semibold text-gray-900 mb-2">YouTube to Content Brief Generator</h3>
                      <p class="text-sm text-gray-600">Transform YouTube videos into structured content briefs with key takeaways</p>
                    </a>
                    <a href="/tools/youtube-blog-post-generator" class="p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:shadow-md transition-all">
                      <h3 class="font-semibold text-gray-900 mb-2">YouTube to Blog Post Generator</h3>
                      <p class="text-sm text-gray-600">Transform YouTube video content briefs into engaging, SEO-optimized blog posts</p>
                    </a>
                    <a href="/tools/youtube-linkedin-post-generator" class="p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:shadow-md transition-all">
                      <h3 class="font-semibold text-gray-900 mb-2">YouTube to LinkedIn Post Generator</h3>
                      <p class="text-sm text-gray-600">Generate professional LinkedIn posts from YouTube video content</p>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <a href="/pricing" class="text-gray-600 hover:text-blue-600 transition-colors">Pricing</a>

        <a href="/contact" class="text-gray-600 hover:text-blue-600 transition-colors">Contact Us</a>
      </nav>

      <!-- User Menu - Right Side -->
      <div class="hidden md:flex items-center flex-shrink-0 ml-6">
        <UserMenu client:load supabaseUrl={SUPABASE_URL} supabaseAnonKey={SUPABASE_ANON_KEY} />
      </div>
    </div>

    <!-- Mobile Navigation Menu -->
    <div id="mobile-menu" class="hidden md:hidden mt-4 py-4 border-t border-gray-200">
      <nav class="flex flex-col space-y-3">
        <a href="/" class="text-gray-600 hover:text-blue-600 transition-colors py-2" onClick={() => setMobileMenuOpen(false)}>Home</a>

        <!-- Product Section (Mobile) -->
        <div class="border-t border-gray-100 pt-3">
          <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Product</div>

          <!-- Free Tools -->
          <div class="mb-4">
            <div class="text-sm font-semibold text-blue-600 mb-2">Free Tools</div>
            <div class="flex flex-col space-y-2 pl-3">
              <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Writing Prompts</div>
              <a href="/writing-prompts-generator/story-starters" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Story Starters</a>
              <a href="/writing-prompts-generator/character" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Character Generator</a>
              <a href="/writing-prompts-generator/conflict" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Conflict Generator</a>
              <a href="/writing-prompts-generator/plot-twist" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Plot Twist Generator</a>
              <a href="/writing-prompts-generator/villain" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Villain Generator</a>

              <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 mt-3">Art Prompts</div>
              <a href="/art-prompts/aesthetic" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Aesthetic Generator</a>
              <a href="/art-prompts/fantasy-art" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Fantasy Art Generator</a>
              <a href="/art-prompts/anime" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Anime Generator</a>
              <a href="/art-prompts/character-design" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Character Design Generator</a>
              <a href="/art-prompts/portrait" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Portrait Generator</a>

              <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 mt-3">Generators</div>
              <a href="/generators/paragraph" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Paragraph Generator</a>
              <a href="/generators/sentence" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Sentence Generator</a>
              <a href="/generators/fantasy-name" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Fantasy Name Generator</a>
              <a href="/generators/superpower" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Superpower Generator</a>
              <a href="/generators/idea" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Idea Generator</a>

              <div class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1 mt-3">Other Prompts</div>
              <a href="/ghostface-ai-trend-prompt-generator" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Ghostface AI Trend</a>
              <a href="/gemini-ai-snow-prompt-tutorial" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Gemini AI Snow Tutorial</a>
              <a href="/chatgpt-photo-editing-prompts" class="text-gray-600 hover:text-blue-600 transition-colors py-1">ChatGPT Photo Editing</a>
              <a href="/gemini-photo-editing-prompts" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Gemini Photo Editing</a>
              <a href="/october-writing-prompts" class="text-gray-600 hover:text-blue-600 transition-colors py-1">October Writing Prompts</a>
              <a href="/christmas-writing-prompts" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Christmas Writing Prompts</a>
              <a href="/writing-prompts-for-students" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Writing Prompts for Students</a>
              <a href="/persuasive-writing-topics" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Persuasive Writing</a>
              <a href="/midjourney-ai-picture-generator" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Midjourney AI Prompts</a>
              <a href="/nano-banana-prompts" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Nano Banana Prompts</a>
            </div>
          </div>

          <!-- Features -->
          <div>
            <div class="text-sm font-semibold text-blue-600 mb-2">Features</div>
            <div class="flex flex-col space-y-2 pl-3">
              <a href="/workflows/youtube-to-blog-and-linkedin" class="text-gray-600 hover:text-blue-600 transition-colors py-1">YouTube â†’ Blog & LinkedIn</a>
              <a href="/tools/youtube-content-brief" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Content Brief Generator</a>
              <a href="/tools/youtube-blog-post-generator" class="text-gray-600 hover:text-blue-600 transition-colors py-1">Blog Post Generator</a>
              <a href="/tools/youtube-linkedin-post-generator" class="text-gray-600 hover:text-blue-600 transition-colors py-1">LinkedIn Post Generator</a>
            </div>
          </div>
        </div>

        <a href="/pricing" class="text-gray-600 hover:text-blue-600 transition-colors py-2 border-t border-gray-100 pt-3">Pricing</a>

        <a href="/contact" class="text-gray-600 hover:text-blue-600 transition-colors py-2">Contact Us</a>

        <!-- User Menu for Mobile -->
        <div class="border-t border-gray-100 pt-3">
          <UserMenu client:load supabaseUrl={SUPABASE_URL} supabaseAnonKey={SUPABASE_ANON_KEY} />
        </div>
      </nav>
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle
  document.addEventListener('DOMContentLoaded', () => {
    const toggleButton = document.getElementById('mobile-menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIcon = document.getElementById('menu-icon');
    const closeIcon = document.getElementById('close-icon');

    if (toggleButton && mobileMenu && menuIcon && closeIcon) {
      toggleButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
        menuIcon.classList.toggle('hidden');
        closeIcon.classList.toggle('hidden');
      });
    }

    // Product megamenu tabs
    const tabs = document.querySelectorAll('.product-tab');
    const tabContents = document.querySelectorAll('.product-tab-content');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const tabName = tab.dataset.tab;

        // Remove active class from all tabs
        tabs.forEach(t => t.classList.remove('active', 'bg-white', 'text-blue-600'));
        // Add active class to clicked tab
        tab.classList.add('active', 'bg-white', 'text-blue-600');

        // Hide all tab contents
        tabContents.forEach(content => content.classList.add('hidden'));
        // Show the selected tab content
        const targetContent = document.querySelector(`[data-content="${tabName}"]`);
        if (targetContent) {
          targetContent.classList.remove('hidden');
        }
      });
    });
  });
</script>
